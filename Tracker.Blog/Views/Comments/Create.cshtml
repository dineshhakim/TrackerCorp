@model Tracker.Blog.Models.Comment

@{
    ViewBag.Title = "Create";
}


<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div class="post-form content">
    <div class="grid_12 prefix_2 suffix_2">
        @using (Html.BeginForm())
        {
            @Html.ValidationSummary(true)
            <fieldset>
                <legend>Comment</legend>

                @Html.ValidationSummary(true)
                <div class="editor-label">
                    @Html.LabelFor(model => model.PostId, "Post")

                </div>
                <div class="editor-field">

                    @Html.TextBoxFor(model => model.Post.Title, new { disabled = "disabled", @readonly = "readonly" })
                    @Html.Hidden("PostId", Model.Post.Id)
                </div>


                <div class="form-group">
                    @Html.LabelFor(model => model.UserName)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(model => model.UserName)

                </div>


                <div class="form-group">
                    @Html.LabelFor(model => model.Message, htmlAttributes: new { @class = "control-label col-md-2" })
                </div>
                <div class="editor-field">
                    @Html.TextAreaFor(model => model.Message, new { htmlAttributes = new { @class = "form-control" } })
                    <div id="textarea_feedback"></div>

                </div>


                <p>
                    <input type="submit" value="Save" />
                </p>
            </fieldset>

        }

    </div>
    <div class="clear"></div>
</div>

<div>
</div>
<script type="text/javascript">
$(document).ready(function() {
    var text_max = $('#Message').attr("data-val-maxlength-max");
    $('#textarea_feedback').html(text_max + ' characters remaining');

    $('#Message').keyup(function () {
        var text_length = $('#Message').val().length;
        var text_remaining = text_max - text_length;

        $('#textarea_feedback').html(text_remaining + ' characters remaining');
 });
});
</script>
